# AWS Image Generation Platform - Environment Configuration
# Copy this file to .env.dev, .env.stage, or .env.prod and customize

# =============================================================================
# CORE SETTINGS
# =============================================================================
AWS_REGION=us-east-1
PROJECT_NAME=obvy-imggen
ENVIRONMENT=dev

# AWS Account ID (will be auto-detected if not set)
# AWS_ACCOUNT_ID=123456789012

# =============================================================================
# SAGEMAKER CONFIGURATION
# =============================================================================

# Inference mode: "async" (scale-to-zero) or "realtime" (always-on)
SAGEMAKER_MODE=async

# Instance types for different modes
INSTANCE_TYPE_ASYNC=ml.g5.xlarge
INSTANCE_TYPE_REALTIME=ml.g5.xlarge

# Scaling configuration
MAX_CONCURRENCY=10
MIN_CAPACITY_REALTIME=1
MAX_CAPACITY_REALTIME=5

# Timeouts (seconds)
INFERENCE_TIMEOUT=300
ASYNC_TIMEOUT=3600

# Auto-scaling settings
SCALE_DOWN_COOLDOWN=300
SCALE_UP_COOLDOWN=60

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# Use SageMaker JumpStart model (recommended)
USE_JUMPSTART=true
JUMPSTART_MODEL_ID=huggingface-txt2img-stable-diffusion-xl-base-1-0

# Alternative: Use custom ECR container
# USE_JUMPSTART=false
# ECR_REPOSITORY_NAME=obvy-model
# MODEL_IMAGE_TAG=latest

# Model parameters
DEFAULT_STEPS=20
MAX_STEPS=50
DEFAULT_GUIDANCE_SCALE=7.5
MAX_GUIDANCE_SCALE=20.0
DEFAULT_WIDTH=1024
DEFAULT_HEIGHT=1024
MAX_RESOLUTION=1024

# =============================================================================
# COST CONTROLS
# =============================================================================

# Monthly budget in USD
MONTHLY_BUDGET_USD=100

# Budget alert thresholds (percentage)
BUDGET_ALERT_THRESHOLD_1=80
BUDGET_ALERT_THRESHOLD_2=100

# Budget alert email
BUDGET_ALERT_EMAIL=admin@example.com

# Keep-warm scheduler (prevents cold starts but increases costs)
ENABLE_KEEP_WARM=false
KEEP_WARM_INTERVAL_MINUTES=10

# Rate limiting
API_RATE_LIMIT_PER_MINUTE=60
API_BURST_LIMIT=100

# =============================================================================
# NETWORKING
# =============================================================================

# Use custom VPC (set to false to use default VPC)
USE_CUSTOM_VPC=false

# VPC CIDR (only used if USE_CUSTOM_VPC=true)
VPC_CIDR=10.0.0.0/16

# Availability Zones (leave empty for auto-selection)
AVAILABILITY_ZONES=

# =============================================================================
# DOMAIN & SSL
# =============================================================================

# Custom domain (optional)
# DOMAIN_NAME=imggen.example.com
# CERTIFICATE_ARN=arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012

# =============================================================================
# STORAGE
# =============================================================================

# S3 lifecycle policies (days)
S3_LIFECYCLE_IA_DAYS=30
S3_LIFECYCLE_GLACIER_DAYS=90
S3_LIFECYCLE_DELETE_DAYS=365

# S3 versioning
S3_VERSIONING_ENABLED=false

# =============================================================================
# SECURITY
# =============================================================================

# WAF configuration
ENABLE_WAF=true
WAF_RATE_LIMIT=2000

# KMS encryption
ENABLE_KMS_ENCRYPTION=true

# VPC Flow Logs
ENABLE_VPC_FLOW_LOGS=false

# GuardDuty
ENABLE_GUARDDUTY=false

# =============================================================================
# OBSERVABILITY
# =============================================================================

# X-Ray tracing
ENABLE_XRAY=true

# CloudWatch log retention (days)
LOG_RETENTION_DAYS=14

# Enhanced monitoring
ENABLE_ENHANCED_MONITORING=true

# Custom metrics
ENABLE_CUSTOM_METRICS=true

# =============================================================================
# AUTHENTICATION
# =============================================================================

# Cognito configuration
COGNITO_USER_POOL_NAME=obvy-imggen-users
COGNITO_DOMAIN_PREFIX=obvy-imggen

# Password policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=false

# MFA settings
ENABLE_MFA=false
MFA_SECOND_FACTOR=SMS_TEXT

# OAuth providers (optional)
# ENABLE_GOOGLE_OAUTH=false
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Enable debug logging
DEBUG_LOGGING=true

# Local development API endpoint
LOCAL_API_ENDPOINT=http://localhost:3001

# Mock services for local development
USE_LOCAL_MOCKS=true

# Seed data
ENABLE_SEED_DATA=true

# =============================================================================
# CI/CD SETTINGS
# =============================================================================

# GitHub repository (for OIDC)
GITHUB_REPOSITORY=your-org/obvy-imggen

# Deployment environments
DEPLOY_ON_PUSH_TO_MAIN=true
REQUIRE_APPROVAL_FOR_PROD=true

# Terraform backend
TF_BACKEND_BUCKET=obvy-imggen-terraform-state
TF_BACKEND_DYNAMODB_TABLE=obvy-imggen-terraform-locks
TF_BACKEND_REGION=us-east-1

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable WebSocket support for real-time updates
ENABLE_WEBSOCKETS=false

# Enable admin UI
ENABLE_ADMIN_UI=false

# Enable image gallery
ENABLE_GALLERY=true

# Enable prompt templates
ENABLE_PROMPT_TEMPLATES=true

# Enable batch processing
ENABLE_BATCH_PROCESSING=false